#! /usr/bin/env ruby

require 'rubygems'
require 'bluecloth'

unless ARGV[0]
  puts "USAGE: #{File.basename(__FILE__)} <txtfile-input> [<htmlfile-output>]"
  puts "     This script converts a markdown-formatted text file into html. Booyah."
  puts "     If not specified, the output filename will be the input filename with an '.html' extension"
  exit 1
end

infile = ARGV[0]
outfile = ARGV[1] || infile.gsub(/\..*/,'.html')

puts "processing markdown file #{infile}, wrting to outfile #{outfile}"

File.open(outfile,"w"){|f| f.write(BlueCloth.new(File.read(infile)).to_html)}

exit 0
